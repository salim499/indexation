(this.webpackJsonpindexation=this.webpackJsonpindexation||[]).push([[0],{57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},67:function(e,t){},73:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var o=n(3),a=n(5),r=n.n(a),c=n(37),i=n.n(c),s=(n(57),n(21)),d=n(18),l=n.p+"static/media/logo.6ce24c58.svg",u=(n(58),n(59),n(45)),f={rotations:0,rotationAngles:[-10,0]};var h=function(e){return Object(o.jsx)(u.a,{options:f,words:e.words})},p=n(43),j=n.n(p),b=(n(73),n(11));var g=function(e){function t(e){var t=5*e.target.dataset.val;f(x.slice(t-5,t))}function n(e){var t=e.target.dataset.val;!1===u.find((function(e){return e.file===t})).showWordCloud?(u.find((function(e){return e.file===t})).showWordCloud=!0,u.find((function(e){return e.file===t})).nuage="Fermer-",u.find((function(e){return e.file===t})).background="#ffffff"):(u.find((function(e){return e.file===t})).showWordCloud=!1,u.find((function(e){return e.file===t})).nuage="Nuage+",u.find((function(e){return e.file===t})).background="none");var n=[];u.forEach((function(e){n.push(e)})),f(n)}function c(e){b.a.firestore().collection("Props").doc(e.target.dataset.val).get().then((function(t){b.a.firestore().collection("Props").doc(e.target.dataset.val).update({nbrVisites:t.data().nbrVisites+1})}))}var i=Object(a.useRef)(null),s=Object(a.useState)([]),l=Object(d.a)(s,2),u=l[0],f=l[1],p=Object(a.useState)([]),g=Object(d.a)(p,2),x=g[0],v=g[1],O=[];return Object(a.useEffect)((function(){var t=[];v(null);var n=[];e.Data.forEach((function(e){!1===n.includes(e.data.file)&&n.push(e.data.file)})),0===n.length&&(f([]),v([])),n.forEach((function(e){b.a.firestore().collection("Props").doc(e).get().then((function(e){return t.push({id:e.id,prop:e.data()})}));var n=[];b.a.firestore().collection("WordsWeights").get().then((function(t){t.forEach((function(t){if(t.data().file===e){var o=n.find((function(e){return e.text===t.data().text}));o?o.value=parseFloat(o.value)+parseFloat(t.data().weight):n.push({text:t.data().text,value:parseFloat(t.data().weight)})}}))})),O.push({file:e,word:n,showWordCloud:!1,nuage:"Nuage +",background:"none"})})),O.forEach((function(e){b.a.firestore().collection("Props").doc(e.file).get().then((function(t){return e.prop=t.data()})).then((function(){for(var e=1,t=[],n=0;n<O.length;n+=5)t.push(e),e++;v(O),f(O.slice(0,5)),console.log("ddddddddddddddddddddddddddddd")}))}))}),[e]),Object(o.jsxs)(r.a.Fragment,{children:[u&&null!==u?u.map((function(e,t){return e.prop?Object(o.jsxs)("div",{className:"global",children:[Object(o.jsxs)("div",{className:"firstPart",style:{background:"white"},children:[Object(o.jsxs)("h2",{children:["xlv,f,xxvxv",Object(o.jsx)("button",{className:"myButton","data-val":e.file,onClick:n,children:e.nuage})]}),Object(o.jsx)("a",{onClick:c,className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:Object(o.jsx)("h2",{"data-val":e.file,children:e.prop.title?e.prop.title:e.prop.description?e.prop.description:e.prop.keywords?e.prop.keywords:null})}),Object(o.jsx)("p",{children:e.prop.description?e.prop.description:e.prop.keywords?e.prop.keywords:null}),Object(o.jsx)("p",{children:e.prop.keywords?e.prop.keywords:e.prop.description?e.prop.description:null}),Object(o.jsx)(j.a,{name:"rate1",starCount:5,value:e.prop.nbrVisites}),Object(o.jsxs)("p",{ref:i,"data-val2":e.prop.nbrVisites,children:["nombres de visites : ",e.prop.nbrVisites]})]}),e.showWordCloud?Object(o.jsx)("div",{className:"secondPart",children:Object(o.jsx)("div",{className:"WordCloud",style:{background:"#000000"},children:Object(o.jsx)(h,{words:e.word})})}):null]}):null})):null,Object(o.jsx)("div",{className:"Footer",children:x?function(e){for(var t=[],n=0,o=0;o<e.length;o+=5)n++,t.push(n);return t}(x).map((function(e,n){return Object(o.jsxs)("p",{children:[Object(o.jsx)("a",{onClick:t,"data-val":e,className:"App-link",href:"#",rel:"noopener noreferrer",children:e}),"\u2002 \xa0"]})})):null})]})};n(77);b.a.initializeApp({apiKey:"AIzaSyBRdMF8d3X2Mrw1No9orSK1Q-Qjr32MIUI",authDomain:"indexation3-c7320.firebaseapp.com",projectId:"indexation3-c7320",storageBucket:"indexation3-c7320.appspot.com",messagingSenderId:"942215022981",appId:"1:942215022981:web:0ebb6a21d24beadaf8dcec",measurementId:"G-4LBYCBS3K9"}),b.a.analytics();var x=b.a,v=n(44),O=n.n(v);var m=function(){O.a.get("http://localhost/indexation_second_version/").then((function(e){e.data.forEach((function(e){console.log(e.title),x.firestore().collection("Files").add({file:e.file}).then((function(t){x.firestore().collection("Props").doc(t.id).set({title:e.title,description:e.descriptions,keywords:e.keywords,nbrVisites:0}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));var n={};for(var o in e.head)n[o]=e.head[o];for(var a in e.body)n[a]>0?(console.log(a+" => "+n[a]),n[a]=n[a]+e.body[a]):n[a]=e.body[a];for(var r in n)x.firestore().collection("WordsWeights").add({text:r,weight:n[r],file:t.id}).then((function(e){return console.log("le mot avec le poid sont ajout\xe9s avec succ\xe8s")})).catch((function(e){return console.log("erreur dans le post des mots et leur poids sur la bdd")}))})).catch((function(e){return console.log("erreur dans la demande pour ajouter les fichier dans la base de donn\xe9es")}))}))})).catch((function(e){console.log("erreur dans la demande au serveur de l'indexation")}))};var k=function(){var e=Object(a.useRef)(null),t=Object(a.useState)([]),n=Object(d.a)(t,2),c=n[0],i=n[1],u=Object(a.useState)("Mode1"),f=Object(d.a)(u,2),h=f[0],p=f[1];function j(e){p(e.target.dataset.mode)}return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("header",{className:"App-header",children:Object(o.jsxs)(r.a.Fragment,{children:[Object(o.jsx)("nav",{children:Object(o.jsxs)("ul",{id:"nav_bar",children:[Object(o.jsx)("li",{id:"sign_in",className:"nav-links",children:Object(o.jsx)("a",{onClick:function(){m()},href:"#",children:"Lancer indexation"})}),Object(o.jsx)("li",{id:"sign_in",className:"nav-links",children:Object(o.jsx)("a",{onClick:j,"data-mode":"Mode3",href:"#",children:"Mode3"})}),Object(o.jsx)("li",{id:"sign_in",className:"nav-links",children:Object(o.jsx)("a",{onClick:j,"data-mode":"Mode2",href:"#",children:"Mode2"})}),Object(o.jsx)("li",{id:"sign_in",className:"nav-links",children:Object(o.jsx)("a",{onClick:j,"data-mode":"Mode1",href:"#",children:"Mode1"})})]})}),Object(o.jsxs)("div",{className:"logo",children:[Object(o.jsx)("img",{src:l,className:"App-logo",alt:"logo"}),Object(o.jsx)("img",{alt:"Google",src:"https://www.google.com/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png"})]}),Object(o.jsx)("div",{className:"bar",children:Object(o.jsx)("input",{className:"searchbar",type:"text",title:"Search",ref:e})}),Object(o.jsx)("div",{className:"buttons",children:Object(o.jsx)("button",{className:"button",onClick:function(){i([]),e.current.value.split(" ").filter((function(e){return e.length>0})).forEach((function(e){var t=e.substr(0,e.length/2),n=e.substr(e.length/2,e.length);x.firestore().collection("WordsWeights").get().then((function(o){o.forEach((function(o){var a=o.data().text.substr(0,o.data().text.length/2),r=o.data().text.substr(o.data().text.length/2,o.data().text.length);if("Mode1"===h){for(var c=0,d=0;d<t.length;d++)a.includes(t.charAt(d))&&(c+=1);for(var l=0;l<n.length;l++)r.includes(n.charAt(l))&&(c+=1);e.length-c<1&&i((function(e){return[].concat(Object(s.a)(e),[{id:o.id,data:o.data()}])}))}else if("Mode2"===h)(a.includes(t)||r.includes(n)||n.includes(r)||t.includes(a))&&i((function(e){return[].concat(Object(s.a)(e),[{id:o.id,data:o.data()}])}));else if("Mode3"===h){for(var u=0,f=0;f<e.length;f++)o.data().text.includes(e.charAt(f))&&(u+=1);Math.abs(e.length-u)<1&&i((function(e){return[].concat(Object(s.a)(e),[{id:o.id,data:o.data()}])}))}}))}))}))},children:"Recherche"})})]})}),Object(o.jsx)("div",{className:"results",children:Object(o.jsx)(g,{Data:c})})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,103)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),o(e),a(e),r(e),c(e)}))};i.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(k,{})}),document.getElementById("root")),w()}},[[95,1,2]]]);
//# sourceMappingURL=main.f0a066cb.chunk.js.map